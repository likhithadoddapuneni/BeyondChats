{"ast":null,"code":"var _jsxFileName = \"/Users/rahul/Downloads/beyondchats-app/frontend/src/components/SourceSelector.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = 'https://beyondchats-5ojh.onrender.com/api';\nexport default function SourceSelector({\n  onSelectPdf,\n  selectedPdfId,\n  onPdfsUpdate,\n  hideList\n}) {\n  _s();\n  const [pdfs, setPdfs] = useState([]);\n  const [uploadFile, setUploadFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    fetchPdfs();\n    // Listen for refresh event from parent\n    const handler = () => fetchPdfs();\n    document.addEventListener('refreshPdfs', handler);\n    return () => document.removeEventListener('refreshPdfs', handler);\n  }, []);\n  const fetchPdfs = async () => {\n    try {\n      const {\n        data\n      } = await axios.get(`${API_URL}/pdfs`);\n      setPdfs(data);\n      if (onPdfsUpdate) onPdfsUpdate(data);\n    } catch (error) {\n      console.error('Error fetching PDFs:', error);\n    }\n  };\n  const handleUpload = async () => {\n    if (!uploadFile) {\n      setMessage('Please select a PDF file');\n      return;\n    }\n    setUploading(true);\n    setMessage('');\n    try {\n      const formData = new FormData();\n      formData.append('pdf', uploadFile);\n      const {\n        data\n      } = await axios.post(`${API_URL}/pdfs/upload`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setMessage(`✅ ${data.filename} uploaded successfully!`);\n      setUploadFile(null);\n      fetchPdfs();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage('❌ Upload failed: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n    } finally {\n      setUploading(false);\n    }\n  };\n  const handleDelete = async pdfId => {\n    if (!window.confirm('Are you sure you want to delete this PDF?')) return;\n    try {\n      await axios.delete(`${API_URL}/pdfs/${pdfId}`);\n      setMessage('PDF deleted successfully.');\n      fetchPdfs();\n      if (selectedPdfId === pdfId) onSelectPdf('');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setMessage('❌ Delete failed: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"source-selector\",\n    children: [!hideList && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCC1 Select PDF Source\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: 'none',\n          padding: 0,\n          margin: 0\n        },\n        children: pdfs.map(pdf => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            marginBottom: '0.5rem',\n            background: selectedPdfId === pdf._id ? '#e6f7ff' : 'white',\n            borderRadius: '6px',\n            padding: '0.5rem 0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              flex: 1,\n              cursor: 'pointer'\n            },\n            onClick: () => onSelectPdf(pdf._id),\n            children: [pdf.originalname, \" (\", pdf.pages, \" pages)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(pdf._id),\n            style: {\n              marginLeft: '0.5rem',\n              background: '#ff4d4f',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              padding: '0.25rem 0.75rem',\n              cursor: 'pointer'\n            },\n            children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, pdf._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          margin: '1.5rem 0',\n          border: '1px solid #eee'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"\\uD83D\\uDCE4 Upload New PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"application/pdf\",\n      onChange: e => setUploadFile(e.target.files[0]),\n      style: {\n        marginTop: '0.5rem',\n        marginBottom: '0.5rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      disabled: uploading,\n      className: \"btn-primary\",\n      style: {\n        width: '100%',\n        marginTop: '0.5rem'\n      },\n      children: uploading ? '⏳ Uploading...' : '📤 Upload PDF'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '1rem',\n        padding: '0.75rem',\n        background: message.includes('✅') ? '#d4edda' : '#f8d7da',\n        borderRadius: '8px',\n        fontSize: '0.9rem'\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(SourceSelector, \"N/grymqQtSVZFvPT8uFwTUJfsE8=\");\n_c = SourceSelector;\nvar _c;\n$RefreshReg$(_c, \"SourceSelector\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","SourceSelector","onSelectPdf","selectedPdfId","onPdfsUpdate","hideList","_s","pdfs","setPdfs","uploadFile","setUploadFile","uploading","setUploading","message","setMessage","fetchPdfs","handler","document","addEventListener","removeEventListener","data","get","error","console","handleUpload","formData","FormData","append","post","headers","filename","_error$response","_error$response$data","response","handleDelete","pdfId","window","confirm","delete","_error$response2","_error$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","listStyle","padding","margin","map","pdf","display","alignItems","marginBottom","background","_id","borderRadius","flex","cursor","onClick","originalname","pages","marginLeft","color","border","type","accept","onChange","e","target","files","marginTop","disabled","width","includes","fontSize","_c","$RefreshReg$"],"sources":["/Users/rahul/Downloads/beyondchats-app/frontend/src/components/SourceSelector.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst API_URL = 'https://beyondchats-5ojh.onrender.com/api';\n\nexport default function SourceSelector({ onSelectPdf, selectedPdfId, onPdfsUpdate, hideList }) {\n  const [pdfs, setPdfs] = useState([]);\n  const [uploadFile, setUploadFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    fetchPdfs();\n    // Listen for refresh event from parent\n    const handler = () => fetchPdfs();\n    document.addEventListener('refreshPdfs', handler);\n    return () => document.removeEventListener('refreshPdfs', handler);\n  }, []);\n\n  const fetchPdfs = async () => {\n    try {\n      const { data } = await axios.get(`${API_URL}/pdfs`);\n      setPdfs(data);\n      if (onPdfsUpdate) onPdfsUpdate(data);\n    } catch (error) {\n      console.error('Error fetching PDFs:', error);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!uploadFile) {\n      setMessage('Please select a PDF file');\n      return;\n    }\n\n    setUploading(true);\n    setMessage('');\n\n    try {\n      const formData = new FormData();\n      formData.append('pdf', uploadFile);\n\n      const { data } = await axios.post(`${API_URL}/pdfs/upload`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n\n      setMessage(`✅ ${data.filename} uploaded successfully!`);\n      setUploadFile(null);\n      fetchPdfs();\n    } catch (error) {\n      setMessage('❌ Upload failed: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleDelete = async (pdfId) => {\n    if (!window.confirm('Are you sure you want to delete this PDF?')) return;\n    try {\n      await axios.delete(`${API_URL}/pdfs/${pdfId}`);\n      setMessage('PDF deleted successfully.');\n      fetchPdfs();\n      if (selectedPdfId === pdfId) onSelectPdf('');\n    } catch (error) {\n      setMessage('❌ Delete failed: ' + (error.response?.data?.error || error.message));\n    }\n  };\n\n  return (\n    <div className=\"source-selector\">\n      {!hideList && <>\n        <h3>📁 Select PDF Source</h3>\n        <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n          {pdfs.map((pdf) => (\n            <li key={pdf._id} style={{ display: 'flex', alignItems: 'center', marginBottom: '0.5rem', background: selectedPdfId === pdf._id ? '#e6f7ff' : 'white', borderRadius: '6px', padding: '0.5rem 0.75rem' }}>\n              <span style={{ flex: 1, cursor: 'pointer' }} onClick={() => onSelectPdf(pdf._id)}>\n                {pdf.originalname} ({pdf.pages} pages)\n              </span>\n              <button onClick={() => handleDelete(pdf._id)} style={{ marginLeft: '0.5rem', background: '#ff4d4f', color: 'white', border: 'none', borderRadius: '4px', padding: '0.25rem 0.75rem', cursor: 'pointer' }}>🗑️ Delete</button>\n            </li>\n          ))}\n        </ul>\n        <hr style={{ margin: '1.5rem 0', border: '1px solid #eee' }} />\n      </>}\n      <h4>📤 Upload New PDF</h4>\n      <input\n        type=\"file\"\n        accept=\"application/pdf\"\n        onChange={(e) => setUploadFile(e.target.files[0])}\n        style={{ marginTop: '0.5rem', marginBottom: '0.5rem' }}\n      />\n      <button \n        onClick={handleUpload} \n        disabled={uploading}\n        className=\"btn-primary\"\n        style={{ width: '100%', marginTop: '0.5rem' }}\n      >\n        {uploading ? '⏳ Uploading...' : '📤 Upload PDF'}\n      </button>\n      {message && (\n        <p style={{ \n          marginTop: '1rem', \n          padding: '0.75rem', \n          background: message.includes('✅') ? '#d4edda' : '#f8d7da',\n          borderRadius: '8px',\n          fontSize: '0.9rem'\n        }}>\n          {message}\n        </p>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}