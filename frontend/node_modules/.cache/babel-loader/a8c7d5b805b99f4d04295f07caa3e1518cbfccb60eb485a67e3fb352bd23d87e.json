{"ast":null,"code":"var _jsxFileName = \"/Users/rahul/Downloads/beyondchats-app/frontend/src/components/SourceSelector.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5001/api';\nexport default function SourceSelector({\n  onSelectPdf,\n  selectedPdfId\n}) {\n  _s();\n  const [pdfs, setPdfs] = useState([]);\n  const [uploadFile, setUploadFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    fetchPdfs();\n  }, []);\n  const fetchPdfs = async () => {\n    try {\n      const {\n        data\n      } = await axios.get(`${API_URL}/pdfs`);\n      setPdfs(data);\n    } catch (error) {\n      console.error('Error fetching PDFs:', error);\n    }\n  };\n  const handleUpload = async () => {\n    if (!uploadFile) {\n      setMessage('Please select a PDF file');\n      return;\n    }\n    setUploading(true);\n    setMessage('');\n    try {\n      const formData = new FormData();\n      formData.append('pdf', uploadFile);\n      const {\n        data\n      } = await axios.post(`${API_URL}/pdfs/upload`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setMessage(`✅ ${data.filename} uploaded successfully!`);\n      setUploadFile(null);\n      fetchPdfs();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage('❌ Upload failed: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n    } finally {\n      setUploading(false);\n    }\n  };\n  const handleDelete = async pdfId => {\n    if (!window.confirm('Are you sure you want to delete this PDF?')) return;\n    try {\n      await axios.delete(`${API_URL}/pdfs/${pdfId}`);\n      setMessage('PDF deleted successfully.');\n      fetchPdfs();\n      if (selectedPdfId === pdfId) onSelectPdf('');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setMessage('❌ Delete failed: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"source-selector\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\uD83D\\uDCC1 Select PDF Source\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        listStyle: 'none',\n        padding: 0,\n        margin: 0\n      },\n      children: pdfs.map(pdf => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          marginBottom: '0.5rem',\n          background: selectedPdfId === pdf._id ? '#e6f7ff' : 'white',\n          borderRadius: '6px',\n          padding: '0.5rem 0.75rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            flex: 1,\n            cursor: 'pointer'\n          },\n          onClick: () => onSelectPdf(pdf._id),\n          children: [pdf.originalname, \" (\", pdf.pages, \" pages)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(pdf._id),\n          style: {\n            marginLeft: '0.5rem',\n            background: '#ff4d4f',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            padding: '0.25rem 0.75rem',\n            cursor: 'pointer'\n          },\n          children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, pdf._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        margin: '1.5rem 0',\n        border: '1px solid #eee'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"\\uD83D\\uDCE4 Upload New PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"application/pdf\",\n      onChange: e => setUploadFile(e.target.files[0]),\n      style: {\n        marginTop: '0.5rem',\n        marginBottom: '0.5rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      disabled: uploading,\n      className: \"btn-primary\",\n      style: {\n        width: '100%',\n        marginTop: '0.5rem'\n      },\n      children: uploading ? '⏳ Uploading...' : '📤 Upload PDF'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '1rem',\n        padding: '0.75rem',\n        background: message.includes('✅') ? '#d4edda' : '#f8d7da',\n        borderRadius: '8px',\n        fontSize: '0.9rem'\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(SourceSelector, \"N/grymqQtSVZFvPT8uFwTUJfsE8=\");\n_c = SourceSelector;\nvar _c;\n$RefreshReg$(_c, \"SourceSelector\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","API_URL","SourceSelector","onSelectPdf","selectedPdfId","_s","pdfs","setPdfs","uploadFile","setUploadFile","uploading","setUploading","message","setMessage","fetchPdfs","data","get","error","console","handleUpload","formData","FormData","append","post","headers","filename","_error$response","_error$response$data","response","handleDelete","pdfId","window","confirm","delete","_error$response2","_error$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","listStyle","padding","margin","map","pdf","display","alignItems","marginBottom","background","_id","borderRadius","flex","cursor","onClick","originalname","pages","marginLeft","color","border","type","accept","onChange","e","target","files","marginTop","disabled","width","includes","fontSize","_c","$RefreshReg$"],"sources":["/Users/rahul/Downloads/beyondchats-app/frontend/src/components/SourceSelector.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst API_URL = 'http://localhost:5001/api';\n\nexport default function SourceSelector({ onSelectPdf, selectedPdfId }) {\n  const [pdfs, setPdfs] = useState([]);\n  const [uploadFile, setUploadFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    fetchPdfs();\n  }, []);\n\n  const fetchPdfs = async () => {\n    try {\n      const { data } = await axios.get(`${API_URL}/pdfs`);\n      setPdfs(data);\n    } catch (error) {\n      console.error('Error fetching PDFs:', error);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!uploadFile) {\n      setMessage('Please select a PDF file');\n      return;\n    }\n\n    setUploading(true);\n    setMessage('');\n\n    try {\n      const formData = new FormData();\n      formData.append('pdf', uploadFile);\n\n      const { data } = await axios.post(`${API_URL}/pdfs/upload`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n\n      setMessage(`✅ ${data.filename} uploaded successfully!`);\n      setUploadFile(null);\n      fetchPdfs();\n    } catch (error) {\n      setMessage('❌ Upload failed: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleDelete = async (pdfId) => {\n    if (!window.confirm('Are you sure you want to delete this PDF?')) return;\n    try {\n      await axios.delete(`${API_URL}/pdfs/${pdfId}`);\n      setMessage('PDF deleted successfully.');\n      fetchPdfs();\n      if (selectedPdfId === pdfId) onSelectPdf('');\n    } catch (error) {\n      setMessage('❌ Delete failed: ' + (error.response?.data?.error || error.message));\n    }\n  };\n\n  return (\n    <div className=\"source-selector\">\n      <h3>📁 Select PDF Source</h3>\n      <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n        {pdfs.map((pdf) => (\n          <li key={pdf._id} style={{ display: 'flex', alignItems: 'center', marginBottom: '0.5rem', background: selectedPdfId === pdf._id ? '#e6f7ff' : 'white', borderRadius: '6px', padding: '0.5rem 0.75rem' }}>\n            <span style={{ flex: 1, cursor: 'pointer' }} onClick={() => onSelectPdf(pdf._id)}>\n              {pdf.originalname} ({pdf.pages} pages)\n            </span>\n            <button onClick={() => handleDelete(pdf._id)} style={{ marginLeft: '0.5rem', background: '#ff4d4f', color: 'white', border: 'none', borderRadius: '4px', padding: '0.25rem 0.75rem', cursor: 'pointer' }}>🗑️ Delete</button>\n          </li>\n        ))}\n      </ul>\n\n      <hr style={{ margin: '1.5rem 0', border: '1px solid #eee' }} />\n\n      <h4>📤 Upload New PDF</h4>\n      <input\n        type=\"file\"\n        accept=\"application/pdf\"\n        onChange={(e) => setUploadFile(e.target.files[0])}\n        style={{ marginTop: '0.5rem', marginBottom: '0.5rem' }}\n      />\n      <button \n        onClick={handleUpload} \n        disabled={uploading}\n        className=\"btn-primary\"\n        style={{ width: '100%', marginTop: '0.5rem' }}\n      >\n        {uploading ? '⏳ Uploading...' : '📤 Upload PDF'}\n      </button>\n\n      {message && (\n        <p style={{ \n          marginTop: '1rem', \n          padding: '0.75rem', \n          background: message.includes('✅') ? '#d4edda' : '#f8d7da',\n          borderRadius: '8px',\n          fontSize: '0.9rem'\n        }}>\n          {message}\n        </p>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}